import{d as e,r as a,q as l,v as u,m as t,o as s,c as d,w as n,n as i,b as o,t as r,p as v,a as c,x as m,u as w,y as h,i as f}from"./index-5b39df8e.js";import{g as b,i as p,h as g,j as _,a as y}from"./page-wraper.5f136bdc.js";import{u as x}from"./useTouch.662a1a46.js";const M=y(e({name:"wd-slider",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:{customMinClass:{default:""},customMaxClass:{default:""},customClass:{default:""},hideMinMax:{type:Boolean,default:!1},hideLabel:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},inactiveColor:{default:"#e5e5e5"},activeColor:{default:""},max:{default:100},min:{default:0},step:{default:1},modelValue:{default:0}},emits:["dragstart","dragmove","dragend","update:modelValue"],setup(e,{emit:y}){const M=e,$={startValue:0,deltaX:0,newValue:0},V=a(`sliderId${b()}`),C=x(),T=x(),k=a(!1),j=a("width: 0; height: 3px"),L=a("3px"),B=a(0),I=a(0),S=a(0),X=a(0),q=a(0),A=a(0),N=a(0),O=a(0),E=a(0),G=a(100),H=a(0),z=a(1);l((()=>M.max),(e=>{e<0?(G.value=100,console.warn("[wot design] warning(wd-slider): max value must be greater than 0")):e<=M.min?(G.value=M.min,H.value=e,console.warn("[wot design] warning(wd-slider): max value must be greater than min value")):G.value=e}),{deep:!0,immediate:!0}),l((()=>M.min),(e=>{e<0?(H.value=0,console.warn("[wot design] warning(wd-slider): min value must be greater than 0")):e>=M.max?(H.value=M.max,G.value=e,console.warn("[wot design] warning(wd-slider): min value must be less than max value")):H.value=e}),{deep:!0,immediate:!0}),l((()=>M.step),(e=>{e<=0&&(z.value=1,console.warn("[wot design] warning(wd-slider): step must be greater than 0"))}),{deep:!0,immediate:!0}),l((()=>M.modelValue),((e,a)=>{if(null==e?(y("update:modelValue",a),console.warn("[wot design] warning(wd-slider): value can nott be null or undefined")):"Array"===te(e)&&2!==e.length?console.warn("[wot design] warning(wd-slider): value must be dyadic array"):"Number"!==te(e)&&"Array"!==te(e)&&(y("update:modelValue",a),console.warn("[wot design] warning(wd-slider): value must be dyadic array Or Number")),O.value=e,p(e)){if(function(e,a){if(!_(e)||!_(a))return!1;let l=0;return e.forEach(((e,u)=>{e===a[u]&&l++})),2===l}(e,a))return;k.value=!0,X.value<=S.value?(le(e[0]),ae(e[1])):(le(e[1]),ae(e[0]))}else{if(e===a)return;le(e)}}),{deep:!0,immediate:!0});const{proxy:D}=h(),F=u((()=>`wd-slider ${M.hideLabel?"":"wd-slider__has-label"} ${M.disabled?"wd-slider--disabled":""} ${M.customClass}`)),J=u((()=>""+(M.inactiveColor?"background:"+M.inactiveColor:""))),K=u((()=>`${j.value};${M.activeColor?"background:"+M.activeColor:""}`)),P=u((()=>`left: ${X.value}%; visibility: ${M.disabled?"hidden":"show"};`)),Q=u((()=>`left: ${S.value}%; visibility: ${M.disabled?"hidden":"show"}`));function R(e){const{disabled:a,modelValue:l}=M;a||(C.touchStart(e),N.value=p(l)?X.value<S.value?se(l[0]):se(l[1]):se(l),y("dragstart",{value:O.value}))}function U(e){const{disabled:a}=M;if(a)return;C.touchMove(e);const l=C.deltaX.value/q.value*(G.value-H.value);E.value=N.value+l,le(E.value),y("dragmove",{value:O.value})}function W(){M.disabled||y("dragend",{value:O.value})}function Y(e){if(M.disabled)return;const{modelValue:a}=M;T.touchStart(e),$.startValue=X.value<S.value?se(a[1]):se(a[0]),y("dragstart",{value:O.value})}function Z(e){if(M.disabled)return;T.touchMove(e);const a=T.deltaX.value/q.value*(G.value-H.value);$.newValue=se($.startValue+a),ae($.newValue),y("dragmove",{value:O.value})}function ee(){M.disabled||y("dragend",{value:O.value})}function ae(e){e=se(e),I.value=e,y("update:modelValue",[Math.min(B.value,I.value),Math.max(B.value,I.value)]),S.value=de(e),ue()}function le(e){const a=de(e=se(e));k.value?(B.value=e,X.value=a,y("update:modelValue",[Math.min(B.value,I.value),Math.max(B.value,I.value)]),ue()):(y("update:modelValue",e),B.value=e,X.value=a,j.value=`width: ${a}%; height: ${L.value};`)}function ue(){const e=X.value<S.value?[X.value,S.value]:[S.value,X.value],a=`width: ${e[1]-e[0]}%; height: ${L.value}; left: ${e[0]}%`;O.value=B.value<I.value?[B.value,I.value]:[I.value,B.value],j.value=a}function te(e){return Object.prototype.toString.call(e).slice(8,-1)}function se(e){return Math.round(Math.max(H.value,Math.min(e,G.value))/z.value)*z.value}function de(e){return(e-H.value)/(G.value-H.value)*100}return t((()=>{g(`#${V.value}`,!1,D).then((e=>{q.value=e.width,A.value=e.left}))})),(a,l)=>{const u=f;return s(),d(u,{class:i(w(F)),id:V.value},{default:n((()=>[e.hideMinMax?v("",!0):(s(),d(u,{key:0,class:i(`wd-slider__label-min ${e.customMinClass}`)},{default:n((()=>[o(r(H.value),1)])),_:1},8,["class"])),c(u,{class:"wd-slider__bar-wrapper",style:m(w(J))},{default:n((()=>[c(u,{class:"wd-slider__bar",style:m(w(K))},null,8,["style"]),c(u,{class:"wd-slider__button-wrapper",style:m(w(P)),onTouchstart:R,onTouchmove:U,onTouchend:W,onTouchcancel:W},{default:n((()=>[e.hideLabel?v("",!0):(s(),d(u,{key:0,class:"wd-slider__label"},{default:n((()=>[o(r(B.value),1)])),_:1})),c(u,{class:"wd-slider__button"})])),_:1},8,["style"]),k.value?(s(),d(u,{key:0,class:"wd-slider__button-wrapper",style:m(w(Q)),onTouchstart:Y,onTouchmove:Z,onTouchend:ee,onTouchcancel:ee},{default:n((()=>[e.hideLabel?v("",!0):(s(),d(u,{key:0,class:"wd-slider__label"},{default:n((()=>[o(r(I.value),1)])),_:1})),c(u,{class:"wd-slider__button"})])),_:1},8,["style"])):v("",!0)])),_:1},8,["style"]),e.hideMinMax?v("",!0):(s(),d(u,{key:1,class:i(`wd-slider__label-max ${e.customMaxClass}`)},{default:n((()=>[o(r(G.value),1)])),_:1},8,["class"]))])),_:1},8,["class","id"])}}}),[["__scopeId","data-v-ac9745a0"]]);export{M as _};
