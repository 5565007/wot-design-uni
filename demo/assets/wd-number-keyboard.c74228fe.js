import{d as e,r as t,v as a,h as l,j as o,o as s,c as d,w as n,a as r,n as u,u as y,p as c,e as i,F as p,b as m,t as f,i as x,q as k,x as b,f as w,g as h}from"./index-5b39df8e.js";import{o as _,b as g,a as v,m as B}from"./page-wraper.5f136bdc.js";import{u as K}from"./useTouch.662a1a46.js";const T=v(e({name:"wd-key",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{type:{default:""},text:{default:""},wider:{type:Boolean,default:!1},large:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},emits:["press"],setup(e,{emit:k}){const b=e,w=K(),h=t(!1),v=a((()=>`wd-key ${b.large?"wd-key--large":""} ${"delete"===b.type?"wd-key--delete":""} ${"close"===b.type?"wd-key--close":""}`));function B(e){w.touchStart(e),h.value=!0}function T(e){w.touchMove(e),w.direction.value&&(h.value=!1)}function C(){h.value&&(h.value=!1,k("press",b.text,b.type))}return(t,a)=>{const k=l(o("wd-loading"),_),w=l(o("wd-icon"),g),h=x;return s(),d(h,{class:u("wd-key-wrapper "+(e.wider?"wd-key-wrapper--wider":"")),onTouchstart:B,onTouchmove:T,onTouchend:C},{default:n((()=>[r(h,{class:u(y(v))},{default:n((()=>[b.loading?(s(),d(k,{key:0,"custom-class":"wd-key--loading-icon"})):c("",!0),"delete"===e.type?(s(),i(p,{key:1},[e.text?(s(),i(p,{key:0},[m(f(e.text),1)],64)):(s(),d(w,{key:1,name:"keyboard-delete",size:"22px"}))],64)):"extra"===e.type?(s(),i(p,{key:2},[e.text?(s(),i(p,{key:0},[m(f(e.text),1)],64)):(s(),d(w,{key:1,name:"keyboard-collapse",size:"22px"}))],64)):(s(),i(p,{key:3},[m(f(e.text),1)],64))])),_:1},8,["class"])])),_:1},8,["class"])}}}),[["__scopeId","data-v-bb40916d"]]),C=v(e({name:"wd-number-keyboard",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{visible:{type:Boolean,default:!1},modelValue:{default:""},title:null,mode:{default:"default"},zIndex:{default:100},maxlength:{default:1/0},showDeleteKey:{type:Boolean,default:!0},randomKeyOrder:{type:Boolean,default:!1},closeText:null,deleteText:null,closeButtonLoading:{type:Boolean,default:!1},modal:{type:Boolean,default:!1},hideOnClickOutside:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},safeAreaInsetBottom:{type:Boolean,default:!0},extraKey:{default:""},customStyle:{default:""},customClass:{default:""}},emits:["update:visible","input","close","delete","update:modelValue"],setup(e,{emit:_}){const g=e,v=t(g.visible);k((()=>g.visible),(e=>{v.value=e}));const K=a((()=>"custom"===g.mode?function(){const e=V(),t=Array.isArray(g.extraKey)?g.extraKey:[g.extraKey];1===t.length?e.push({text:0,wider:!0},{text:t[0],type:"extra"}):2===t.length&&e.push({text:t[0],type:"extra"},{text:0},{text:t[1],type:"extra"});return e}():[...V(),{text:g.extraKey,type:"extra"},{text:0},{text:g.showDeleteKey?g.deleteText:"",type:g.showDeleteKey?"delete":""}])),C=a((()=>g.closeText&&"default"===g.mode)),I=a((()=>g.title||C.value));function V(){const e=Array.from({length:9},((e,t)=>({text:t+1})));return g.randomKeyOrder?function(e){const t=[...e];for(let a=t.length-1;a>0;a--){const e=Math.floor(Math.random()*(a+1));[t[a],t[e]]=[t[e],t[a]]}return t}(e):e}const S=()=>{_("close"),_("update:visible",!1)},z=(e,t)=>{if(""===e&&"extra"===t)return S();const a=g.modelValue;"delete"===t?(_("delete"),_("update:modelValue",a.slice(0,a.length-1))):"close"===t?S():a.length<+g.maxlength&&(_("input",e),_("update:modelValue",a+e))};return(t,a)=>{const k=h,_=x,g=l(o("wd-popup"),B);return s(),d(g,{modelValue:v.value,"onUpdate:modelValue":a[0]||(a[0]=e=>v.value=e),position:"bottom","z-index":e.zIndex,"safe-area-inset-bottom":e.safeAreaInsetBottom,"modal-style":e.modal?"":"opacity: 0;",modal:e.hideOnClickOutside,lockScroll:e.lockScroll,onClickModal:S},{default:n((()=>[r(_,{class:u(`wd-number-keyboard ${e.customClass}`),style:b(e.customStyle)},{default:n((()=>[y(I)?(s(),d(_,{key:0,class:"wd-number-keyboard__header"},{default:n((()=>[r(k,{class:"wd-number-keyboard__title"},{default:n((()=>[m(f(e.title),1)])),_:1}),y(C)?(s(),d(_,{key:0,class:"wd-number-keyboard__close","hover-class":"wd-number-keyboard__close--hover",onClick:S},{default:n((()=>[r(k,null,{default:n((()=>[m(f(e.closeText),1)])),_:1})])),_:1})):c("",!0)])),_:1})):c("",!0),r(_,{class:"wd-number-keyboard__body"},{default:n((()=>[r(_,{class:"wd-number-keyboard__keys"},{default:n((()=>[(s(!0),i(p,null,w(y(K),(e=>(s(),d(T,{key:e.text,text:e.text,type:e.type,wider:e.wider,onPress:z},null,8,["text","type","wider"])))),128))])),_:1}),"custom"===e.mode?(s(),d(_,{key:0,class:"wd-number-keyboard__sidebar"},{default:n((()=>[e.showDeleteKey?(s(),d(T,{key:0,large:"",text:e.deleteText,type:"delete",onPress:z},null,8,["text"])):c("",!0),r(T,{large:"",text:e.closeText,type:"close",loading:e.closeButtonLoading,onPress:z},null,8,["text","loading"])])),_:1})):c("",!0)])),_:1})])),_:1},8,["class","style"])])),_:1},8,["modelValue","z-index","safe-area-inset-bottom","modal-style","modal","lockScroll"])}}}),[["__scopeId","data-v-332a3f59"]]);export{C as _};
