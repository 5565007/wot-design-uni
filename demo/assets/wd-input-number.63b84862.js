import{A as e,b as a,B as t,a as l}from"./page-wraper.5f136bdc.js";import{d as n,r as u,q as i,h as s,j as o,o as d,c as r,w as p,a as c,n as m,T as f,x as b,p as v,i as w,X as h}from"./index-5b39df8e.js";const _=l(n({name:"wd-input-number",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{customClass:{default:""},modelValue:null,min:{default:1},max:{default:Number.MAX_SAFE_INTEGER},step:{default:1},stepStrictly:{type:Boolean,default:!1},precision:{default:0},disabled:{type:Boolean,default:!1},disableInput:{type:Boolean,default:!1},disableMinus:{type:Boolean,default:!1},disablePlus:{type:Boolean,default:!1},withoutInput:{type:Boolean,default:!1},inputWidth:{default:36},allowNull:{type:Boolean,default:!1},placeholder:{default:""}},emits:["focus","blur","change","update:modelValue"],setup(l,{emit:n}){const _=l,y=u(!1),N=u(!1),x=u("");function M(e){const{disabled:a,min:t,max:l,step:n}=_;y.value=a||e<=t||g(e,-n)<t,N.value=a||e>=l||g(e,n)>l}function B(e){return Number(parseFloat(""+Math.round(e*Math.pow(10,_.precision))/Math.pow(10,_.precision)).toFixed(_.precision))}function I(e){const a=function(e){if(void 0===e)return 0;const a=e.toString(),t=a.indexOf(".");let l=0;return-1!==t&&(l=a.length-t-1),l}(_.step),t=Math.pow(10,a);return Math.round(e/_.step)*t*_.step/t}function V(e,a=!0){const l=t(e);!_.allowNull||"null"!==l&&"undefined"!==l&&""!==e?(_.stepStrictly&&(e=I(e)),!e&&0!==e||void 0===_.precision||(e=B(Number(e))),Number(e)>_.max&&(e=B(_.max)),Number(e)<_.min&&(e=B(_.min)),A(e,a)):A(e,a)}function g(e,a){if(e=Number(e),isNaN(e))return _.min;const t=Math.pow(10,_.precision);return B((e*t+a*t)/t)}function C(){if(y.value||_.disableMinus)return;A(g(x.value,-_.step))}function F(){if(N.value||_.disablePlus)return;A(g(x.value,_.step))}function S(e){A(e.detail.value||"")}function k(e){n("focus",e.detail)}function j(){const e=E(x.value);V(e),n("blur",{value:e})}function A(e,a=!0){x.value=e,a&&n("change",{value:e}),a&&n("update:modelValue",x.value)}function E(e){const a=t(e);return!_.allowNull||"null"!==a&&"undefined"!==a&&""!==e?(e=Number(e),isNaN(e)&&(e=_.min),_.stepStrictly&&(e=I(e)),void 0!==_.precision&&(e=e.toFixed(_.precision)),e):""}return i((()=>_.modelValue),(e=>{x.value=e,M(e)}),{immediate:!0,deep:!0}),i([()=>_.max,()=>_.min],(()=>{e((()=>{const e=E(x.value);V(e),M(e)}),30)()}),{immediate:!0,deep:!0}),i((()=>_.disabled),(e=>{y.value=e,N.value=e}),{immediate:!0,deep:!0}),(e,t)=>{const n=s(o("wd-icon"),a),u=w,i=h;return d(),r(u,{class:m(`wd-input-number ${l.customClass} ${l.disabled?"is-disabled":""} ${l.withoutInput?"is-without-input":""}`)},{default:p((()=>[c(u,{class:m("wd-input-number__action "+(y.value||l.disableMinus?"is-disabled":"")),onClick:C},{default:p((()=>[c(n,{name:"decrease","custom-class":"wd-input-number__action-icon"})])),_:1},8,["class"]),l.withoutInput?v("",!0):(d(),r(u,{key:0,class:"wd-input-number__inner",onClick:t[1]||(t[1]=f((()=>{}),["stop"]))},{default:p((()=>[c(i,{class:"wd-input-number__input",style:b(""+(l.inputWidth?"width: "+l.inputWidth:"")),type:"digit",disabled:l.disabled||l.disableInput,modelValue:x.value,"onUpdate:modelValue":t[0]||(t[0]=e=>x.value=e),placeholder:l.placeholder,onInput:S,onFocus:k,onBlur:j},null,8,["style","disabled","modelValue","placeholder"]),c(u,{class:"wd-input-number__input-border"})])),_:1})),c(u,{class:m("wd-input-number__action "+(N.value||l.disablePlus?"is-disabled":"")),onClick:F},{default:p((()=>[c(n,{name:"add","custom-class":"wd-input-number__action-icon"})])),_:1},8,["class"])])),_:1},8,["class"])}}}),[["__scopeId","data-v-44b63041"]]);export{_};
