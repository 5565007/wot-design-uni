import{r as e,O as a,d as l,v as t,P as o,q as s,h as u,j as n,o as r,c,w as i,a as d,n as p,u as m,b as v,t as f,p as _,e as w,F as y,z as x,i as b}from"./index-5b39df8e.js";import{_ as g}from"./wd-input.32ced7dd.js";import{_ as k}from"./wd-button.666a7a8c.js";import{y as h,j as C,m as z,a as V}from"./page-wraper.5f136bdc.js";import{u as B}from"./useTranslate.58e1bf0a.js";const j="__MESSAGE_OPTION__",E={title:"",showCancelButton:!1,show:!1,closeOnClickModal:!0,msg:"",type:"alert",inputType:"text",inputValue:"",inputValidate:null,showErr:!1,zIndex:99,lazyRender:!0,inputError:""};function I(l=""){const t=e(E);a(l?j+l:j,t);const o=e=>a=>{const l=h({type:e},"string"==typeof a?{title:a}:a);return"confirm"===l.type||"prompt"===l.type?l.showCancelButton=!0:l.showCancelButton=!1,s(l)},s=e=>new Promise(((a,l)=>{const o=h(E,"string"==typeof e?{title:e}:e);t.value=h(o,{show:!0,onConfirm:e=>{a(e)},onCancel:e=>{l(e)}})})),u=o("alert"),n=o("confirm"),r=o("prompt");return{show:s,alert:u,confirm:n,prompt:r,close:()=>{t.value={...E}}}}const T=V(l({name:"wd-message-box",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{useSlot:{type:Boolean,default:!1},selector:{default:""},customClass:{default:""}},setup(a){const l=a,{translate:h}=B("message-box"),V=t((()=>`wd-message-box__container ${l.customClass}`)),I=t((()=>`wd-message-box__body ${G.value?"":"is-no-title"} ${"prompt"===A.value?"is-prompt":""}`)),T=l.selector?j+l.selector:j,O=o(T,e(E)),P=e("");let S=null,M=null;const $=e(!1),G=e(""),N=e(!1),R=e(!0),U=e(""),q=e(""),A=e("alert"),F=e("text"),H=e(""),D=e(""),J=e();let K=null;const L=e(""),Q=e(!1),W=e(99),X=e(!0);function Y(e){if(("modal"!==e||R.value)&&("prompt"!==A.value||"confirm"!==e||function(){if(J.value&&!J.value.test(String(H.value)))return Q.value=!0,!1;if("function"==typeof K){if(!K(H))return Q.value=!0,!1}return Q.value=!1,!0}()))switch($.value=!1,e){case"confirm":S&&S({action:e,value:H.value});break;case"cancel":M&&M({action:e});break;default:M&&M({action:"modal"})}}function Z(e){""!==e?H.value=e:Q.value=!1}return s((()=>O.value),(e=>{var a;(a=e)&&(G.value=C(a.title)?a.title:G.value,N.value=C(a.showCancelButton)?a.showCancelButton:N.value,$.value=a.show,R.value=a.closeOnClickModal,U.value=a.confirmButtonText,q.value=a.cancelButtonText,P.value=a.msg,A.value=a.type,F.value=a.inputType,H.value=a.inputValue,D.value=a.inputPlaceholder,J.value=a.inputPattern,K=a.inputValidate,S=a.onConfirm,M=a.onCancel,L.value=a.inputError,Q.value=a.showErr,W.value=a.zIndex,X.value=a.lazyRender)}),{deep:!0,immediate:!0}),s((()=>$.value),(e=>{!1===e&&(Q.value=!1)}),{deep:!0,immediate:!0}),(e,l)=>{const t=b,o=u(n("wd-input"),g),s=u(n("wd-button"),k),C=u(n("wd-popup"),z);return r(),c(t,null,{default:i((()=>[d(C,{transition:"zoom-in",modelValue:$.value,"onUpdate:modelValue":l[3]||(l[3]=e=>$.value=e),"close-on-click-modal":R.value,"lazy-render":X.value,"custom-class":"wd-message-box",onClickModal:l[4]||(l[4]=e=>Y("modal")),"z-index":W.value,duration:200},{default:i((()=>[d(t,{class:p(m(V))},{default:i((()=>[d(t,{class:p(m(I))},{default:i((()=>[G.value?(r(),c(t,{key:0,class:"wd-message-box__title"},{default:i((()=>[v(f(G.value),1)])),_:1})):_("",!0),d(t,{class:"wd-message-box__content"},{default:i((()=>["prompt"===A.value?(r(),w(y,{key:0},[d(o,{modelValue:H.value,"onUpdate:modelValue":l[0]||(l[0]=e=>H.value=e),type:F.value,size:"large",placeholder:D.value||"请输入",onInput:Z},null,8,["modelValue","type","placeholder"]),Q.value?(r(),c(t,{key:0,class:"wd-message-box__input-error"},{default:i((()=>[v(f(L.value||m(h)("inputNoValidate")),1)])),_:1})):_("",!0)],64)):_("",!0),a.useSlot?x(e.$slots,"default",{key:1},void 0,!0):(r(),w(y,{key:2},[v(f(P.value),1)],64))])),_:3})])),_:3},8,["class"]),d(t,{class:p("wd-message-box__actions "+(N.value?"wd-message-box__flex":"wd-message-box__block"))},{default:i((()=>[N.value?(r(),c(s,{key:0,type:"info",block:"","custom-style":"margin-right: 16px;",onClick:l[1]||(l[1]=e=>Y("cancel"))},{default:i((()=>[v(f(q.value||m(h)("cancel")),1)])),_:1})):_("",!0),d(s,{block:"",onClick:l[2]||(l[2]=e=>Y("confirm"))},{default:i((()=>[v(f(U.value||m(h)("confirm")),1)])),_:1})])),_:1},8,["class"])])),_:3},8,["class"])])),_:3},8,["modelValue","close-on-click-modal","lazy-render","z-index"])])),_:3})}}}),[["__scopeId","data-v-1dc2ce69"]]);export{T as _,I as u};
