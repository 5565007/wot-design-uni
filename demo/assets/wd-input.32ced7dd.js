import{z as e,k as l,p as a,b as o,F as s,t,a as n}from"./page-wraper.5f136bdc.js";import{d as u,r as i,q as r,v as d,N as c,h as p,j as f,o as m,c as y,w as h,n as v,u as _,x as b,z as w,p as g,a as x,e as k,F as S,b as B,t as I,i as C,X as $,g as P}from"./index-5b39df8e.js";import{u as V}from"./useTranslate.58e1bf0a.js";const j=n(u({name:"wd-input",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{customInputClass:{default:""},customLabelClass:{default:""},customClass:{default:""},customStyle:{default:""},placeholder:null,placeholderStyle:null,placeholderClass:{default:""},cursorSpacing:{default:0},cursor:{default:-1},selectionStart:{default:-1},selectionEnd:{default:-1},adjustPosition:{type:Boolean,default:!0},holdKeyboard:{type:Boolean,default:!1},confirmType:{default:"done"},confirmHold:{type:Boolean,default:!1},focus:{type:Boolean,default:!1},type:{default:"text"},maxlength:{default:-1},disabled:{type:Boolean,default:!1},alwaysEmbed:{type:Boolean,default:!1},alignRight:{type:Boolean,default:!1},modelValue:{default:""},showPassword:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},useSuffixSlot:{type:Boolean,default:!1},usePrefixSlot:{type:Boolean,default:!1},prefixIcon:null,suffixIcon:null,showWordLimit:{type:Boolean,default:!1},label:null,labelWidth:{default:"33%"},useLabelSlot:{type:Boolean,default:!1},size:null,error:{type:Boolean,default:!1},center:{type:Boolean,default:!1},noBorder:{type:Boolean,default:!1},required:{type:Boolean,default:!1},prop:null,rules:{default:()=>[]}},emits:["update:modelValue","clear","change","blur","focus","input","keyboardheightchange","confirm","linechange","clicksuffixicon","clickprefixicon","click"],setup(n,{emit:u}){const j=n,{translate:L}=V("input"),q=i(!1),W=i(!1),z=i(!1),E=i(!1),F=i(!1),H=i(""),K=e();r((()=>j.focus),(e=>{F.value=e}),{immediate:!0,deep:!0}),r((()=>j.modelValue),(e=>{const{disabled:l,readonly:a,clearable:o}=j;void 0===e&&(e="",console.warn("[wot-design] warning(wd-input): value can not be undefined.")),H.value=e,q.value=Boolean(o&&!l&&!a&&e)}),{immediate:!0,deep:!0});const{parent:M}=l(s),T=d((()=>M&&j.prop&&M.errorMessages&&M.errorMessages[j.prop]?M.errorMessages[j.prop]:"")),A=d((()=>{let e=!1;if(M&&M.props.rules){const l=M.props.rules;for(const a in l)Object.prototype.hasOwnProperty.call(l,a)&&a===j.prop&&Array.isArray(l[a])&&(e=l[a].some((e=>e.required)))}return j.required||j.rules.some((e=>e.required))||e})),O=d((()=>`wd-input  ${j.label||j.useLabelSlot?"is-cell":""} ${j.center?"is-center":""} ${K.border.value?"is-border":""} ${j.size?"is-"+j.size:""} ${j.error?"is-error":""} ${j.disabled?"is-disabled":""}  ${H.value&&String(H.value).length>0?"is-not-empty":""}  ${j.noBorder?"is-no-border":""} ${j.customClass}`)),R=d((()=>`wd-input__label ${j.customLabelClass} ${A.value?"is-required":""}`)),G=d((()=>`wd-input__placeholder  ${j.placeholderClass}`)),N=d((()=>j.labelWidth?a({"min-width":j.labelWidth,"max-width":j.labelWidth}):""));function U(){z.value=!z.value}function X(){H.value="",t().then((()=>t())).then((()=>t())).then((()=>{F.value=!0,u("change",{value:""}),u("update:modelValue",H.value),u("clear")}))}function D({detail:e}){F.value=!1,u("change",{value:H.value}),u("update:modelValue",H.value),u("blur",{value:H.value})}function J({detail:e}){E.value?E.value=!1:(F.value=!0,u("focus",e))}function Q(){u("update:modelValue",H.value),u("input",H.value)}function Y(e){u("keyboardheightchange",e.detail)}function Z({detail:e}){u("confirm",e)}function ee(){u("clicksuffixicon")}function le(){u("clickprefixicon")}function ae(e){u("click",e)}return c((()=>{!function(){const{disabled:e,readonly:l,clearable:a,maxlength:o,showWordLimit:s}=j;let t="";s&&o&&H.value.toString().length>o&&(t=H.value.toString().substring(0,o));q.value=Boolean(!e&&!l&&a&&H.value),W.value=Boolean(!e&&!l&&o&&s),H.value=t||H.value,u("update:modelValue",H.value)}()})),(e,l)=>{const a=p(f("wd-icon"),o),s=C,t=$,u=P;return m(),y(s,{class:v(_(O)),style:b(n.customStyle),onClick:ae},{default:h((()=>[n.label||n.useLabelSlot?(m(),y(s,{key:0,class:v(_(R)),style:b(_(N))},{default:h((()=>[n.prefixIcon||n.usePrefixSlot?(m(),y(s,{key:0,class:"wd-input__prefix"},{default:h((()=>[n.prefixIcon&&!n.usePrefixSlot?(m(),y(a,{key:0,"custom-class":"wd-input__icon",name:n.prefixIcon,onClick:le},null,8,["name"])):w(e.$slots,"prefix",{key:1},void 0,!0)])),_:3})):g("",!0),x(s,{class:"wd-input__label-inner"},{default:h((()=>[n.label?(m(),k(S,{key:0},[B(I(n.label),1)],64)):w(e.$slots,"label",{key:1},void 0,!0)])),_:3})])),_:3},8,["class","style"])):g("",!0),x(s,{class:"wd-input__body"},{default:h((()=>[x(s,{class:"wd-input__value"},{default:h((()=>[!n.prefixIcon&&!n.usePrefixSlot||n.label?g("",!0):(m(),y(s,{key:0,class:"wd-input__prefix"},{default:h((()=>[n.prefixIcon?(m(),y(a,{key:0,"custom-class":"wd-input__icon",name:n.prefixIcon,onClick:le},null,8,["name"])):g("",!0),w(e.$slots,"prefix",{},void 0,!0)])),_:3})),x(t,{class:v(["wd-input__inner",n.prefixIcon?"wd-input__inner--prefix":"",W.value?"wd-input__inner--count":"",n.alignRight?"is-align-right":"",n.customInputClass]),type:n.type,password:n.showPassword&&!z.value,modelValue:H.value,"onUpdate:modelValue":l[0]||(l[0]=e=>H.value=e),placeholder:n.placeholder||_(L)("placeholder"),disabled:n.disabled,maxlength:n.maxlength,focus:F.value,"confirm-type":n.confirmType,"confirm-hold":n.confirmHold,cursor:n.cursor,"cursor-spacing":n.cursorSpacing,"placeholder-style":n.placeholderStyle,"selection-start":n.selectionStart,"selection-end":n.selectionEnd,"adjust-position":n.adjustPosition,"hold-keyboard":n.holdKeyboard,"always-embed":n.alwaysEmbed,"placeholder-class":_(G),onInput:Q,onFocus:J,onBlur:D,onConfirm:Z,onKeyboardheightchange:Y},null,8,["class","type","password","modelValue","placeholder","disabled","maxlength","focus","confirm-type","confirm-hold","cursor","cursor-spacing","placeholder-style","selection-start","selection-end","adjust-position","hold-keyboard","always-embed","placeholder-class"]),n.readonly?(m(),y(s,{key:1,class:"wd-input__readonly-mask"})):g("",!0),q.value||n.showPassword||n.suffixIcon||W.value||n.useSuffixSlot?(m(),y(s,{key:2,class:"wd-input__suffix"},{default:h((()=>[q.value?(m(),y(a,{key:0,"custom-class":"wd-input__clear",name:"error-fill",onClick:X})):g("",!0),n.showPassword?(m(),y(a,{key:1,"custom-class":"wd-input__icon",name:z.value?"view":"eye-close",onClick:U},null,8,["name"])):g("",!0),W.value?(m(),y(s,{key:2,class:"wd-input__count"},{default:h((()=>[x(u,{class:v([H.value&&String(H.value).length>0?"wd-input__count-current":"",String(H.value).length>n.maxlength?"is-error":""])},{default:h((()=>[B(I(String(H.value).length),1)])),_:1},8,["class"]),B(" /"+I(n.maxlength),1)])),_:1})):g("",!0),n.suffixIcon?(m(),y(a,{key:3,"custom-class":"wd-input__icon",name:n.suffixIcon,onClick:ee},null,8,["name"])):g("",!0),w(e.$slots,"suffix",{},void 0,!0)])),_:3})):g("",!0)])),_:3}),_(T)?(m(),y(s,{key:0,class:"wd-input__error-message"},{default:h((()=>[B(I(_(T)),1)])),_:1})):g("",!0)])),_:3})])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-5b695df3"]]);export{j as _};
