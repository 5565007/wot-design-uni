import{d as e,r as t,v as a,q as r,h as s,j as o,o as l,c as n,w as c,a as u,n as p,x as i,u as d,b as g,t as f,p as m,i as _}from"./index-5b39df8e.js";import{p as h,q as b,i as v,b as w,a as y,_ as x}from"./page-wraper.5f136bdc.js";import{_ as k}from"./demo-block.528ea9ea.js";const N=y(e({name:"wd-progress",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{customClass:{default:""},percentage:{default:0},hideText:{type:Boolean,default:!1},color:{default:"linear-gradient(315deg, rgba(81,124,240,1) 0%,rgba(118,158,245,1) 100%)"},duration:{default:30},status:null},setup(e){const y=e,x=t(""),k=t(0),N=t(0),T=t("");let j=null;const I=a((()=>{const e={background:x.value,width:k.value+"%","transition-duration":N.value*y.duration*.001+"s"};return h(e)}));function C(e,t){if(j)return;const{duration:a}=y;N.value=Math.abs(e-k.value),setTimeout((()=>{k.value=e,x.value=t,j=setTimeout((()=>{clearTimeout(j),j=null,$()}),N.value*a)}),50)}function $(){const{percentage:e,color:t}=y;if(k.value===e||!e)return;let a=v(t)?t:[t];if(0===a.length)throw Error("The colorArray is empty");const r=a.every((e=>"string"==typeof e)),s=a.every((e=>e.hasOwnProperty("color")&&e.hasOwnProperty("percentage")));if(!r&&!s)throw Error("Color must be String or Object with color and percentage");if(s&&a.some((({percentage:e})=>Number.isNaN(parseInt(e)))))throw Error("All the percentage must can be formatted to Number");const o=parseInt(""+100/a.length),l=s?a.sort(((e,t)=>e.percentage-t.percentage)):a.map(((e,t)=>({color:e,percentage:(t+1)*o})));k.value>e?l.some((t=>{if(e<=t.percentage)return C(e,t.color),!0})):l.some(((t,a)=>{if(k.value<t.percentage&&t.percentage<=e)return C(t.percentage,t.color),!0;a===l.length-1&&C(e,t.color)}))}return r((()=>y.percentage),(e=>{(Number.isNaN(e)||e<0||e>100)&&console.error("The value of percentage must be between 0 and 100"),$()})),r((()=>y.color),(()=>{$()}),{deep:!0,immediate:!0}),r((()=>y.status),(()=>{!function(){const{status:e}=y;let t=[];e&&t.push(`is-${e}`),T.value=t.join(" ")}()}),{deep:!0,immediate:!0}),r((()=>y.duration),(e=>{b(e)}),{deep:!0,immediate:!0}),(t,a)=>{const r=_,h=s(o("wd-icon"),w);return l(),n(r,{class:p(`wd-progress ${e.customClass}`)},{default:c((()=>[u(r,{class:"wd-progress__outer"},{default:c((()=>[u(r,{class:p(`wd-progress__inner ${T.value}`),style:i(d(I))},null,8,["class","style"])])),_:1}),e.hideText?e.status?(l(),n(h,{key:1,"custom-class":`wd-progress__label wd-progress__icon ${T.value}`,name:"danger"==e.status?"close-outline":"check-outline",color:"string"==typeof e.color?e.color:""},null,8,["custom-class","name","color"])):m("",!0):(l(),n(r,{key:0,class:"wd-progress__label"},{default:c((()=>[g(f(e.percentage)+"%",1)])),_:1}))])),_:1},8,["class"])}}}),[["__scopeId","data-v-40636b77"]]),T=e({__name:"Index",setup(e){const a=t([{color:"yellow",percentage:30},{color:"red",percentage:60},{color:"blue",percentage:80},{color:"black",percentage:90}]),r=t(100);return(e,t)=>{const p=s(o("wd-progress"),N),i=s(o("demo-block"),k),d=s(o("page-wraper"),x);return l(),n(d,null,{default:c((()=>[u(i,{title:"基本用法"},{default:c((()=>[u(p,{percentage:30})])),_:1}),u(i,{title:"不显示进度文字"},{default:c((()=>[u(p,{percentage:60,"hide-text":""})])),_:1}),u(i,{title:"进度条状态"},{default:c((()=>[u(p,{percentage:100,"hide-text":"",status:"success"}),u(p,{percentage:80,"hide-text":"",status:"danger"})])),_:1}),u(i,{title:"修改颜色"},{default:c((()=>[u(p,{percentage:80,color:"#00c740"})])),_:1}),u(i,{title:"颜色数组"},{default:c((()=>[u(p,{percentage:100,color:["#00c740","#ffb300","#e2231a","#0083ff"]}),u(p,{percentage:r.value,color:a.value},null,8,["percentage","color"])])),_:1})])),_:1})}}});export{T as default};
