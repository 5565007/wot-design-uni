import{z as e,k as a,p as l,b as o,F as t,t as s,a as r}from"./page-wraper.5f136bdc.js";import{d as u,r as n,q as d,v as i,N as c,h as f,j as p,o as h,c as m,w as y,n as b,u as x,x as g,z as v,p as _,a as w,b as B,t as k,i as $,g as C,a2 as S}from"./index-5b39df8e.js";import{u as V}from"./useTranslate.58e1bf0a.js";const j=r(u({name:"wd-textarea",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{placeholder:null,placeholderStyle:null,placeholderClass:{default:""},disabled:{type:Boolean,default:!1},maxlength:{default:-1},focus:{type:Boolean,default:!1},autoFocus:{type:Boolean,default:!1},autoHeight:{type:Boolean,default:!1},fixed:{type:Boolean,default:!1},cursorSpacing:{default:0},cursor:{default:-1},confirmType:{default:"done"},confirmHold:{type:Boolean,default:!1},showConfirmBar:{type:Boolean,default:!0},selectionStart:{default:-1},selectionEnd:{default:-1},adjustPosition:{type:Boolean,default:!0},disableDefaultPadding:{type:Boolean,default:!1},holdKeyboard:{type:Boolean,default:!1},modelValue:{default:""},showPassword:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},prefixIcon:null,usePrefixSlot:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},label:null,labelWidth:{default:"33%"},useLabelSlot:{type:Boolean,default:!1},size:null,error:{type:Boolean,default:!1},center:{type:Boolean,default:!1},noBorder:{type:Boolean,default:!1},required:{type:Boolean,default:!1},prop:null,rules:{default:()=>[]},customTextareaContainerClass:{default:""},customTextareaClass:{default:""},customLabelClass:{default:""},customClass:{default:""},customStyle:{default:""}},emits:["update:modelValue","clear","change","blur","focus","input","keyboardheightchange","confirm","linechange","clickprefixicon","click"],setup(r,{emit:u}){const j=r,{translate:L}=V("textarea"),P=n(!1),I=n(!1),T=n(!1),W=n(!1),q=n(""),H=e();d((()=>j.focus),(e=>{W.value=e}),{immediate:!0,deep:!0}),d((()=>j.modelValue),(e=>{const{disabled:a,readonly:l,clearable:o}=j;null==e&&(e="",console.warn("[wot-design] warning(wd-textarea): value can not be null or undefined.")),q.value=e,P.value=Boolean(o&&!a&&!l&&e)}),{immediate:!0,deep:!0});const{parent:z}=a(t),F=i((()=>z&&j.prop&&z.errorMessages&&z.errorMessages[j.prop]?z.errorMessages[j.prop]:"")),K=i((()=>{let e=!1;if(z&&z.props.rules){const a=z.props.rules;for(const l in a)Object.prototype.hasOwnProperty.call(a,l)&&l===j.prop&&Array.isArray(a[l])&&(e=a[l].some((e=>e.required)))}return j.required||j.rules.some((e=>e.required))||e})),M=i((()=>String(j.modelValue||"").length)),A=i((()=>`wd-textarea   ${j.label||j.useLabelSlot?"is-cell":""} ${j.center?"is-center":""} ${H.border.value?"is-border":""} ${j.size?"is-"+j.size:""} ${j.error?"is-error":""} ${j.disabled?"is-disabled":""} ${j.autoHeight?"is-auto-height":""} ${M.value>0?"is-not-empty":""}  ${j.noBorder?"is-no-border":""} ${j.customClass}`)),D=i((()=>`wd-textarea__label ${j.customLabelClass} ${K.value?"is-required":""}`)),E=i((()=>`wd-textarea__placeholder  ${j.placeholderClass}`)),O=i((()=>`${M.value>0?"wd-textarea__count-current":""} ${M.value>j.maxlength?"is-error":""}`)),G=i((()=>j.labelWidth?l({"min-width":j.labelWidth,"max-width":j.labelWidth}):""));function N(e){const{maxlength:a,showWordLimit:l}=j;return l&&-1!==a&&e.length>a?e.toString().substring(0,a):e}function U(){q.value="",s().then((()=>s())).then((()=>s())).then((()=>{W.value=!0,u("change",{value:""}),u("update:modelValue",q.value),u("clear")}))}function J({detail:e}){W.value=!1,u("change",{value:q.value}),u("update:modelValue",q.value),u("blur",{value:q.value,cursor:e.cursor?e.cursor:null})}function Q({detail:e}){T.value?T.value=!1:(W.value=!0,u("focus",e))}function R(){q.value=N(q.value),u("update:modelValue",q.value),u("input",q.value)}function X({detail:e}){u("keyboardheightchange",e)}function Y({detail:e}){u("confirm",e)}function Z({detail:e}){u("linechange",e)}function ee(){u("clickprefixicon")}function ae(e){u("click",e)}return c((()=>{!function(){const{disabled:e,readonly:a,clearable:l,maxlength:o,showWordLimit:t}=j;P.value=Boolean(!e&&!a&&l&&q.value),I.value=Boolean(!e&&!a&&o&&t),q.value=N(q.value),u("update:modelValue",q.value)}()})),(e,a)=>{const l=f(p("wd-icon"),o),t=$,s=C,u=S;return h(),m(t,{class:b(x(A)),style:g(r.customStyle),onClick:ae},{default:y((()=>[r.label||r.useLabelSlot?(h(),m(t,{key:0,class:b(x(D)),style:g(x(G))},{default:y((()=>[r.prefixIcon||r.usePrefixSlot?(h(),m(t,{key:0,class:"wd-textarea__prefix"},{default:y((()=>[r.prefixIcon&&!r.usePrefixSlot?(h(),m(l,{key:0,"custom-class":"wd-textarea__icon",name:r.prefixIcon,onClick:ee},null,8,["name"])):v(e.$slots,"prefix",{key:1},void 0,!0)])),_:3})):_("",!0),w(t,{class:"wd-textarea__label-inner"},{default:y((()=>[r.label?(h(),m(s,{key:0},{default:y((()=>[B(k(r.label),1)])),_:1})):v(e.$slots,"label",{key:1},void 0,!0)])),_:3})])),_:3},8,["class","style"])):_("",!0),w(t,{class:b(`wd-textarea__value ${r.customTextareaContainerClass} ${I.value?"is-show-limit":""}`)},{default:y((()=>[w(u,{class:b(`wd-textarea__inner ${P.value?"is-suffix":""} ${r.customTextareaClass}`),modelValue:q.value,"onUpdate:modelValue":a[0]||(a[0]=e=>q.value=e),"show-count":!1,placeholder:r.placeholder||x(L)("placeholder"),disabled:r.disabled,maxlength:r.maxlength,focus:W.value,"auto-focus":r.autoFocus,"placeholder-style":r.placeholderStyle,"placeholder-class":x(E),"auto-height":r.autoHeight,"cursor-spacing":r.cursorSpacing,fixed:r.fixed,cursor:r.cursor,"show-confirm-bar":r.showConfirmBar,"selection-start":r.selectionStart,"selection-end":r.selectionEnd,"adjust-position":r.adjustPosition,"hold-keyboard":r.holdKeyboard,"confirm-type":r.confirmType,"confirm-hold":r.confirmHold,"disable-default-padding":r.disableDefaultPadding,onInput:R,onFocus:Q,onBlur:J,onConfirm:Y,onLinechange:Z,onKeyboardheightchange:X},null,8,["class","modelValue","placeholder","disabled","maxlength","focus","auto-focus","placeholder-style","placeholder-class","auto-height","cursor-spacing","fixed","cursor","show-confirm-bar","selection-start","selection-end","adjust-position","hold-keyboard","confirm-type","confirm-hold","disable-default-padding"]),x(F)?(h(),m(t,{key:0,class:"wd-textarea__error-message"},{default:y((()=>[B(k(x(F)),1)])),_:1})):_("",!0),r.readonly?(h(),m(t,{key:1,class:"wd-textarea__readonly-mask"})):_("",!0),w(t,{class:"wd-textarea__suffix"},{default:y((()=>[P.value?(h(),m(l,{key:0,"custom-class":"wd-textarea__clear",name:"error-fill",onClick:U})):_("",!0),I.value?(h(),m(t,{key:1,class:"wd-textarea__count"},{default:y((()=>[w(s,{class:b(x(O))},{default:y((()=>[B(k(x(M)),1)])),_:1},8,["class"]),B(" /"+k(r.maxlength),1)])),_:1})):_("",!0)])),_:1})])),_:1},8,["class"])])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-000874e2"]]);export{j as _};
