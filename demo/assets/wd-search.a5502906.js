import{p as e,t as a,b as l,a as s}from"./page-wraper.5f136bdc.js";import{d as u,r as c,q as t,m as o,v as n,h as d,j as r,o as i,c as f,w as h,a as v,z as p,x as m,u as _,b as y,t as x,p as w,e as C,F as b,n as g,g as k,i as B,X as V}from"./index-5b39df8e.js";import{u as S}from"./useTranslate.58e1bf0a.js";const $=s(u({name:"wd-search",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{userSuffixSlot:{type:Boolean,default:!1},placeholder:null,cancelTxt:null,light:{type:Boolean,default:!1},hideCancel:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},maxlength:{default:-1},modelValue:{default:""},placeholderLeft:{type:Boolean,default:!1},focus:{type:Boolean,default:!1},focusWhenClear:{type:Boolean,default:!1},customClass:{default:""},customStyle:{default:""}},emits:["update:modelValue","change","clear","search","focus","blur","cancel"],setup(s,{emit:u}){const $=s,{translate:j}=S("search"),z=c(!1),L=c(!1),I=c(""),T=c(!0),W=c(!1);t((()=>$.modelValue),(e=>{I.value=e,e&&(L.value=!0)}),{immediate:!0}),t((()=>$.focus),(e=>{if(e){if($.disabled)return;H()}})),o((()=>{$.focus&&H()}));const F=n((()=>`wd-search  ${$.light?"is-light":""}  ${$.hideCancel?"is-without-cancel":""} ${$.customClass}`)),q=n((()=>{const a={display:""===I.value&&T.value?"flex":"none"};return e(a)}));function G(e){L.value=e,a((()=>{z.value=e}))}function H(){$.disabled||a().then((()=>a())).then((()=>a())).then((()=>{T.value=!1,G(!0)}))}function U(e){I.value=e.detail.value,u("update:modelValue",e.detail.value),u("change",{value:e.detail.value})}function X(){I.value="",W.value=!0,$.focusWhenClear&&(z.value=!1),a().then((()=>a())).then((()=>a())).then((()=>{$.focusWhenClear?(T.value=!1,G(!0)):(T.value=!0,G(!1)),u("change",{value:""}),u("update:modelValue",""),u("clear")}))}function A({detail:{value:e}}){u("search",{value:e})}function D(){W.value?W.value=!1:(T.value=!1,u("focus",{value:I.value}))}function E(){W.value||(T.value=!I.value,L.value=!T.value,z.value=!1,u("blur",{value:I.value}))}function J(){u("cancel",{value:I.value})}return(e,a)=>{const u=d(r("wd-icon"),l),c=k,t=B,o=V;return i(),f(t,{class:g(_(F)),style:m(s.customStyle)},{default:h((()=>[v(t,{class:"wd-search__block"},{default:h((()=>[p(e.$slots,"prefix",{},void 0,!0),v(t,{class:"wd-search__field"},{default:h((()=>[s.placeholderLeft?w("",!0):(i(),f(t,{key:0,style:m(_(q)),class:"wd-search__cover",onClick:H},{default:h((()=>[v(u,{name:"search",size:"18px","custom-class":"wd-search__search-icon"}),v(c,{class:"wd-search__placeholder-txt"},{default:h((()=>[y(x(s.placeholder||_(j)("search")),1)])),_:1})])),_:1},8,["style"])),L.value||I.value||s.placeholderLeft?(i(),f(u,{key:1,name:"search",size:"18px","custom-class":"wd-search__search-left-icon"})):w("",!0),L.value||I.value||s.placeholderLeft?(i(),f(o,{key:2,placeholder:s.placeholder||_(j)("search"),"placeholder-class":"wd-search__placeholder-txt","confirm-type":"search",modelValue:I.value,"onUpdate:modelValue":a[0]||(a[0]=e=>I.value=e),class:"wd-search__input",onFocus:D,onInput:U,onBlur:E,onConfirm:A,disabled:s.disabled,maxlength:s.maxlength,focus:z.value},null,8,["placeholder","modelValue","disabled","maxlength","focus"])):w("",!0),I.value?(i(),f(u,{key:3,"custom-class":"wd-search__clear wd-search__clear-icon",name:"error-fill",size:"16px",onClick:X})):w("",!0)])),_:1})])),_:3}),s.hideCancel?w("",!0):(i(),C(b,{key:0},[s.userSuffixSlot?p(e.$slots,"suffix",{key:0},void 0,!0):(i(),f(t,{key:1,class:"wd-search__cancel",onClick:J},{default:h((()=>[y(x(s.cancelTxt||_(j)("cancel")),1)])),_:1}))],64))])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-dfa98ffe"]]);export{$ as _};
