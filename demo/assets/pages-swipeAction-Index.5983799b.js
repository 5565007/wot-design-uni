import{h as e,a,c as t,d as l,e as s,_ as u}from"./page-wraper.5f136bdc.js";import{d as o,P as n,r as d,q as c,N as i,m as f,Y as r,o as b,c as _,w as p,a as v,x as k,z as h,n as m,T as g,y as w,i as y,b as C,u as $,h as V,j as T}from"./index-5b39df8e.js";import{p as j,r as x,q as z,c as I,u as Q}from"./clickoutside.4554814f.js";import{u as q}from"./useTouch.662a1a46.js";import{_ as M}from"./demo-block.528ea9ea.js";import{_ as O}from"./wd-button.666a7a8c.js";const P=a(o({name:"wd-swipe-action",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:{customClass:null,beforeClose:null,disabled:{type:Boolean,default:!1},modelValue:{default:"close"}},emits:["click","update:modelValue"],setup(a,{expose:t,emit:l}){const s=a,u=n(z,null),o=d(""),C=d(0),$=d(0),V=d(!1),T=q(),{proxy:Q}=w();function M(e,a){s.disabled||O().then((([t,l])=>{switch(e){case"close":if(0===$.value)return;H("value",a);break;case"left":P(t);break;case"right":P(-l)}}))}function O(){return Promise.all([e(".wd-swipe-action__left",!1,Q).then((e=>e.width?e.width:0)),e(".wd-swipe-action__right",!1,Q).then((e=>e.width?e.width:0))])}function P(e=0){const a=`translate3d(${e}px, 0, 0)`,t=V.value?"none":".6s cubic-bezier(0.18, 0.89, 0.32, 1)";o.value=`\n        -webkit-transform: ${a};\n        -webkit-transition: ${t};\n        transform: ${a};\n        transition: ${t};\n      `,$.value=e}function F(e){s.disabled||0===$.value||(H("click",e=e||"inside"),l("click",{value:e}))}function B(e){s.disabled||(C.value=$.value,T.touchStart(e),u&&u.closeOther?u.closeOther(Q):I(Q))}function D(e){if(s.disabled)return;if(T.touchMove(e),"vertical"===T.direction.value)return;e.preventDefault(),e.stopPropagation(),V.value=!0;const a=C.value+T.deltaX.value;O().then((([t,l])=>0===t&&a>0||0===l&&a<0?(P(0),B(e)):0!==t&&a>=t?(P(t),B(e)):0!==l&&-a>=l?(P(-l),B(e)):void P(a)))}function G(){if(s.disabled)return;const e=.3;V.value=!1,O().then((([a,t])=>{C.value<0&&$.value<0&&$.value-C.value<t*e?(P(-t),l("update:modelValue","right")):C.value>0&&$.value>0&&C.value-$.value<a*e?(P(a),l("update:modelValue","left")):t>0&&C.value>=0&&$.value<0&&Math.abs($.value)>t*e?(P(-t),l("update:modelValue","right")):a>0&&C.value<=0&&$.value>0&&Math.abs($.value)>a*e?(P(a),l("update:modelValue","left")):H("swipe")}))}function H(e,a){if("swipe"===e&&0===C.value)return P(0);"swipe"===e&&C.value>0?a="left":"swipe"===e&&C.value<0&&(a="right"),e&&a&&s.beforeClose&&s.beforeClose(e,a),P(0),"close"!==s.modelValue&&l("update:modelValue","close")}return c((()=>s.modelValue),((e,a)=>{M(e,a)}),{deep:!0}),i((()=>{u&&u.pushToQueue?u.pushToQueue(Q):j(Q),C.value=0,$.value=0,V.value=!1})),f((()=>{V.value=!0,M(s.modelValue),V.value=!1})),r((()=>{u&&u.removeFromQueue?u.removeFromQueue(Q):x(Q)})),t({close:H}),(e,t)=>{const l=y;return b(),_(l,{class:m(`wd-swipe-action ${a.customClass}`),onClick:t[2]||(t[2]=g((e=>F()),["stop"])),onTouchstart:B,onTouchmove:D,onTouchend:G,onTouchcancel:G},{default:p((()=>[v(l,{class:"wd-swipe-action__wrapper",style:k(o.value)},{default:p((()=>[v(l,{class:"wd-swipe-action__left",onClick:t[0]||(t[0]=e=>F("left"))},{default:p((()=>[h(e.$slots,"left",{},void 0,!0)])),_:3}),h(e.$slots,"default",{},void 0,!0),v(l,{class:"wd-swipe-action__right",onClick:t[1]||(t[1]=e=>F("right"))},{default:p((()=>[h(e.$slots,"right",{},void 0,!0)])),_:3})])),_:3},8,["style"])])),_:3},8,["class"])}}}),[["__scopeId","data-v-7ba00fb2"]]),F=a(o({__name:"Index",setup(e){const{closeOutside:a}=Q(),o=t(),n=d("close"),c=(e,a)=>{"click"===e?o.show(`${e} ${a}导致滑动按钮关闭`):o.show(`${e}导致${a}滑动按钮关闭`)};function i(e){n.value=e}function f({value:e}){o.show(`点击${e}关闭操作按钮`)}function r(e){o.show(`点击了${e}`)}function k(){}return(e,t)=>{const o=V(T("wd-toast"),l),d=V(T("wd-cell"),s),h=y,m=V(T("wd-swipe-action"),P),w=V(T("demo-block"),M),j=V(T("wd-button"),O),x=V(T("page-wraper"),u);return b(),_(x,null,{default:p((()=>[v(o),v(h,{onClick:g($(a),["stop"])},{default:p((()=>[v(w,{transparent:"",title:"基本用法"},{default:p((()=>[v(m,null,{right:p((()=>[v(h,{class:"action"},{default:p((()=>[v(h,{class:"button",style:{background:"#fa4350"},onClick:t[0]||(t[0]=e=>r("操作1"))},{default:p((()=>[C("操作1")])),_:1}),v(h,{class:"button",style:{background:"#f0883a"},onClick:t[1]||(t[1]=e=>r("操作2"))},{default:p((()=>[C("操作2")])),_:1}),v(h,{class:"button",style:{background:"#4d80f0"},onClick:t[2]||(t[2]=e=>r("操作3"))},{default:p((()=>[C("操作3")])),_:1})])),_:1})])),default:p((()=>[v(d,{title:"标题文字",value:"内容"})])),_:1})])),_:1}),v(w,{transparent:"",title:"左右滑动"},{default:p((()=>[v(m,null,{left:p((()=>[v(h,{class:"action"},{default:p((()=>[v(h,{class:"button",style:{background:"#fa4350"}},{default:p((()=>[C("操作1")])),_:1}),v(h,{class:"button",style:{background:"#f0883a"}},{default:p((()=>[C("操作2")])),_:1}),v(h,{class:"button",style:{background:"#4d80f0"}},{default:p((()=>[C("操作3")])),_:1})])),_:1})])),right:p((()=>[v(h,{class:"action"},{default:p((()=>[v(h,{class:"button",style:{background:"#fa4350"}},{default:p((()=>[C("操作4")])),_:1}),v(h,{class:"button",style:{background:"#f0883a"}},{default:p((()=>[C("操作5")])),_:1}),v(h,{class:"button",style:{background:"#4d80f0"}},{default:p((()=>[C("操作6")])),_:1})])),_:1})])),default:p((()=>[v(d,{title:"标题文字",value:"内容"})])),_:1})])),_:1}),v(w,{transparent:"",title:"切换按钮"},{default:p((()=>[v(m,{modelValue:n.value,"onUpdate:modelValue":t[3]||(t[3]=e=>n.value=e),"before-close":c},{left:p((()=>[v(h,{class:"action"},{default:p((()=>[v(h,{class:"button",style:{background:"#fa4350"}},{default:p((()=>[C("操作1")])),_:1}),v(h,{class:"button",style:{background:"#f0883a"}},{default:p((()=>[C("操作2")])),_:1}),v(h,{class:"button",style:{background:"#4d80f0"}},{default:p((()=>[C("操作3")])),_:1})])),_:1})])),right:p((()=>[v(h,{class:"action"},{default:p((()=>[v(h,{class:"button",style:{background:"#fa4350"}},{default:p((()=>[C("操作4")])),_:1}),v(h,{class:"button",style:{background:"#f0883a"}},{default:p((()=>[C("操作5")])),_:1}),v(h,{class:"button",style:{background:"#4d80f0"}},{default:p((()=>[C("操作6")])),_:1})])),_:1})])),default:p((()=>[v(d,{title:"标题文字",value:"内容"})])),_:1},8,["modelValue"])])),_:1}),v(h,{class:"button-group"},{default:p((()=>[v(h,{onClick:g(k,["stop"])},{default:p((()=>[v(j,{size:"small",onClick:t[4]||(t[4]=e=>i("left"))},{default:p((()=>[C("打开左边")])),_:1})])),_:1},8,["onClick"]),v(h,{onClick:g(k,["stop"])},{default:p((()=>[v(j,{size:"small",onClick:t[5]||(t[5]=e=>i("close"))},{default:p((()=>[C("关闭所有")])),_:1})])),_:1},8,["onClick"]),v(h,{onClick:g(k,["stop"])},{default:p((()=>[v(j,{size:"small",onClick:t[6]||(t[6]=e=>i("right"))},{default:p((()=>[C("打开右边")])),_:1})])),_:1},8,["onClick"])])),_:1}),v(w,{transparent:"",title:"点击事件"},{default:p((()=>[v(m,{onClick:f},{right:p((()=>[v(h,{class:"action"},{default:p((()=>[v(h,{class:"button",style:{background:"#fa4350"}},{default:p((()=>[C("操作1")])),_:1}),v(h,{class:"button",style:{background:"#f0883a"}},{default:p((()=>[C("操作2")])),_:1}),v(h,{class:"button",style:{background:"#4d80f0"}},{default:p((()=>[C("操作3")])),_:1})])),_:1})])),default:p((()=>[v(d,{title:"标题文字",value:"内容"})])),_:1})])),_:1}),v(w,{transparent:"",title:"禁用滑动按钮"},{default:p((()=>[v(m,{disabled:""},{right:p((()=>[v(h,{class:"action"},{default:p((()=>[v(h,{class:"button",style:{background:"#fa4350"}},{default:p((()=>[C("操作1")])),_:1}),v(h,{class:"button",style:{background:"#f0883a"}},{default:p((()=>[C("操作2")])),_:1}),v(h,{class:"button",style:{background:"#4d80f0"}},{default:p((()=>[C("操作3")])),_:1})])),_:1})])),default:p((()=>[v(d,{title:"标题文字",value:"内容"})])),_:1})])),_:1})])),_:1},8,["onClick"])])),_:1})}}}),[["__scopeId","data-v-e84d9436"]]);export{F as default};
