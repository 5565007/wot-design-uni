import{d as e,P as o,q as s,m as t,N as l,Y as a,h as n,j as u,o as c,c as p,w as d,a as r,n as i,b as m,t as _,p as f,e as y,F as v,f as w,u as k,x as C,z as h,T as b,y as V,i as S,g}from"./index-5b39df8e.js";import{b as j,l as A,a as $}from"./page-wraper.5f136bdc.js";import{u as x}from"./usePopover.51420573.js";import{c as T,r as B,q as P,p as Q}from"./clickoutside.4554814f.js";const F=$(e({name:"wd-popover",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{customArrow:{default:""},customPop:{default:""},customClass:{default:""},visibleArrow:{type:Boolean,default:!0},content:{default:""},placement:{default:"bottom"},offset:{default:0},useContentSlot:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},showClose:{type:Boolean,default:!1},modelValue:{type:Boolean,default:!1},mode:{default:"normal"}},emits:["update:modelValue","menuclick","change","open","close"],setup(e,{expose:$,emit:F}){const q=e,I=o(P,null),{proxy:O}=V();s((()=>q.content),(e=>{const{mode:o}=q;"normal"===o&&"string"!=typeof e?console.error("The value type must be a string type in normal mode"):"menu"===o&&"Array"!==z.checkType(e)&&console.error("The value type must be a Array type in menu mode")})),s((()=>q.modelValue),(e=>{e&&(z.control(q.placement,q.offset),I&&I.closeOther?I.closeOther(O):T(O)),z.showStyle.value=e?"display: inline-block;":"display: none;",F("change",{show:e}),F(""+(e?"open":"close"))})),t((()=>{z.init(q.placement,q.visibleArrow,"popover")})),l((()=>{I&&I.pushToQueue?I.pushToQueue(O):Q(O),z.showStyle.value=q.modelValue?"opacity: 1;":"opacity: 0;"})),a((()=>{I&&I.removeFromQueue?I.removeFromQueue(O):B(O)}));const z=x();function G(e){F("update:modelValue",!1),F("menuclick",{item:q.content[e],index:e})}function H(){q.disabled||F("update:modelValue",!q.modelValue)}return $({open:function(){F("update:modelValue",!0)},close:function(){F("update:modelValue",!1)}}),(o,s)=>{const t=S,l=n(u("wd-icon"),j),a=g,V=n(u("wd-transition"),A);return c(),p(t,{class:i(`wd-popover ${e.customClass}`),id:"popover",onClick:b(k(z).noop,["stop"])},{default:d((()=>[r(t,{class:"wd-popover__pos wd-popover__hidden",id:"pos"},{default:d((()=>[r(t,{class:i(`wd-popover__container ${e.customPop}`)},{default:d((()=>[e.useContentSlot||"normal"!==e.mode?f("",!0):(c(),p(t,{key:0,class:"wd-popover__inner"},{default:d((()=>[m(_(e.content),1)])),_:1})),e.useContentSlot||"menu"!==e.mode||"object"!=typeof e.content?f("",!0):(c(),p(t,{key:1,class:"wd-popover__menu"},{default:d((()=>[(c(!0),y(v,null,w(e.content,((e,o)=>(c(),p(t,{key:o,class:"wd-popover__menu-inner",onClick:e=>G(o)},{default:d((()=>[e.iconClass?(c(),p(l,{key:0,name:e.iconClass,"custom-class":"wd-popover__icon"},null,8,["name"])):f("",!0),r(a,null,{default:d((()=>[m(_(e.content),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1}))])),_:1},8,["class"])])),_:1}),r(V,{"custom-class":"wd-popover__pos","custom-style":k(z).popStyle.value,show:e.modelValue,name:"fade",duration:200},{default:d((()=>[r(t,{class:i(`wd-popover__container ${e.customPop}`)},{default:d((()=>[q.visibleArrow?(c(),p(t,{key:0,class:i(`wd-popover__arrow ${k(z).arrowClass.value} ${e.customArrow}`),style:C(k(z).arrowStyle.value)},null,8,["class","style"])):f("",!0),e.useContentSlot||"normal"!==e.mode?f("",!0):(c(),p(t,{key:1,class:"wd-popover__inner"},{default:d((()=>[m(_(e.content),1)])),_:1})),e.useContentSlot||"menu"!==e.mode?h(o.$slots,"content",{key:3},void 0,!0):(c(),p(t,{key:2,class:"wd-popover__menu"},{default:d((()=>[(c(!0),y(v,null,w(e.content,((e,o)=>(c(),p(t,{key:o,class:"wd-popover__menu-inner",onClick:e=>G(o),style:C(0===o?"border-top: none":"")},{default:d((()=>["object"==typeof e&&e.iconClass?(c(),p(l,{key:0,name:e.iconClass,"custom-class":"wd-popover__icon"},null,8,["name"])):f("",!0),r(t,{style:{display:"inline-block"}},{default:d((()=>[m(_("object"==typeof e&&e.content?e.content:""),1)])),_:2},1024)])),_:2},1032,["onClick","style"])))),128))])),_:1}))])),_:3},8,["class"]),e.showClose?(c(),p(l,{key:0,name:"close","custom-class":"wd-popover__close-icon",onClick:H})):f("",!0)])),_:3},8,["custom-style","show"]),r(t,{onClick:H,class:"wd-popover__target",id:"target"},{default:d((()=>[h(o.$slots,"default",{},void 0,!0)])),_:3})])),_:3},8,["class","onClick"])}}}),[["__scopeId","data-v-82201d24"]]);export{F as _};
