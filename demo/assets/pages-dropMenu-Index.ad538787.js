import{d as e,P as l,r as o,q as a,N as t,Y as u,v as n,h as s,j as d,o as i,c as p,w as r,a as c,e as m,F as f,f as v,n as _,b as w,t as b,p as y,z as g,x as h,u as V,y as k,g as C,i as x,G as $,T as K}from"./index-5b39df8e.js";import{k as I,j as S,b as U,m as j,a as z,g as B,h as P,e as M,_ as O}from"./page-wraper.5f136bdc.js";import{p as T,r as E,q as F,c as N,u as Q}from"./clickoutside.4554814f.js";import{u as G}from"./useChildren.5fd1f1a4.js";import{_ as H}from"./demo-block.528ea9ea.js";import{_ as q}from"./wd-button.666a7a8c.js";import{_ as A}from"./wd-sort-button.1502a8a2.js";const D=Symbol("wd-drop-menu"),L=z(e({name:"wd-drop-menu-item",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{customClass:{default:""},customTitle:{default:""},customIcon:{default:""},modelValue:null,options:{default:()=>[]},useDropItemSlot:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},iconName:{default:"check"},title:null,valueKey:{default:"value"},labelKey:{default:"label"},tipKey:{default:"tip"}},emits:["change","update:modelValue","open","opened","closed","close"],setup(e,{expose:$,emit:K}){const z=e,B=l(F,null),P=o(!1),M=o(!1),O=o(),N=o(12),Q=o(!0),G=o(!0),H=o(0),{parent:q}=I(D),{proxy:A}=k();function L(){M.value&&(M.value=!1,q&&q.fold())}a((()=>z.modelValue),(e=>{S(e)&&"number"!=typeof e&&"string"!=typeof e&&console.error("[wot-design] warning(wd-drop-menu-item): the type of value should be a number or a string.")}),{deep:!0,immediate:!0}),t((()=>{B&&B.pushToQueue?B.pushToQueue(A):T(A)})),u((()=>{B&&B.removeFromQueue?B.removeFromQueue(A):E(A)}));const Y=n((()=>{let e="";return e=P.value&&q?"down"===q.props.direction?`top: calc(var(--window-top) + ${q.offset.value}px); bottom: 0;`:`top: 0; bottom: calc(var(--window-bottom) + ${q.offset.value}px)`:"",e}));function J(){P.value=!1,K("closed")}function R(){K("open")}function W(){K("opened")}function X(){K("close")}return $({setShowPop:function(e){M.value=e},getShowPop:function(){return M.value},open:function(){P.value=!0,M.value=!0,q&&(Q.value=Boolean(q.props.modal),H.value=Number(q.props.duration),G.value=Boolean(q.props.closeOnClickModal),O.value="down"===q.props.direction?"top":"bottom"),K("open")},close:L}),(l,o)=>{const a=C,t=x,u=s(d("wd-icon"),U),n=s(d("wd-popup"),j);return P.value?(i(),p(t,{key:0,class:_(`wd-drop-item  ${e.customClass}`),style:h(`z-index: ${N.value}; ${V(Y)}`)},{default:r((()=>[c(n,{modelValue:M.value,"onUpdate:modelValue":o[0]||(o[0]=e=>M.value=e),"z-index":N.value,duration:H.value,position:O.value,"custom-style":"position: absolute; max-height: 80%;","modal-style":"position: absolute;",modal:Q.value,"close-on-click-modal":G.value,onClickModal:L,onBeforeEnter:R,onAfterEnter:W,onBeforeLeave:X,onAfterLeave:J},{default:r((()=>[e.options.length?(i(),p(t,{key:0},{default:r((()=>[(i(!0),m(f,null,v(e.options,((l,o)=>(i(),p(t,{key:o,onClick:e=>function(e){if(z.disabled)return;const{valueKey:l}=z,o=z.options[e];K("update:modelValue",""!==o[l]&&void 0!==o[l]?o[l]:o),L(),K("change",{value:""!==o[l]&&void 0!==o[l]?o[l]:o,selectedItem:o})}(o),class:_("wd-drop-item__option "+((""!==l[e.valueKey]?l[e.valueKey]:l)===e.modelValue?"is-active":""))},{default:r((()=>[c(t,{class:_(`wd-drop-item__title ${e.customTitle}`)},{default:r((()=>[c(a,null,{default:r((()=>[w(b(l[e.labelKey]?l[e.labelKey]:l),1)])),_:2},1024),l[e.tipKey]?(i(),p(a,{key:0,class:"wd-drop-item__tip"},{default:r((()=>[w(b(l[e.tipKey]),1)])),_:2},1024)):y("",!0)])),_:2},1032,["class"]),(""!==l[e.valueKey]?l[e.valueKey]:l)===e.modelValue?(i(),p(u,{key:0,name:e.iconName,size:"20px",class:_(`wd-drop-item__icon ${e.customIcon}`)},null,8,["name","class"])):y("",!0)])),_:2},1032,["onClick","class"])))),128))])),_:1})):g(l.$slots,"default",{key:1},void 0,!0)])),_:3},8,["modelValue","z-index","duration","position","modal","close-on-click-modal"])])),_:3},8,["class","style"])):y("",!0)}}}),[["__scopeId","data-v-28066d7b"]]),Y=z(e({name:"wd-drop-menu",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{customClass:{default:""},customStyle:{default:""},zIndex:{default:12},direction:{default:"down"},modal:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},duration:{default:200}},setup(e){const u=e,n=l(F,null),y=o(`dropMenuId${B()}`),C=o(null),I=o(0),S=o(0),{proxy:j}=k(),{linkChildren:z,children:M}=G(D);function O(e){e.preventDefault(),e.stopPropagation()}function T(e){const{title:l,modelValue:o,options:a,valueKey:t,labelKey:u}=e;if(l)return l;for(let n=0,s=a.length;n<s;n++)if(o===a[n][t])return a[n][u];console.error("[wot-design] warning(wd-drop-menu-item): no value is matched in the options option.")}function E(e){C.value=e?e.$.uid:null,e?P(`#${y.value}`,!1,j).then((l=>{if(!l)return;const{top:o,bottom:a}=l;"down"===u.direction?I.value=a:I.value=S.value-o;e.$.exposed.getShowPop()?(e.$.exposed.setShowPop(!1),C.value=null):M.forEach((l=>{e.$.uid===l.$.uid?l.$.exposed.open():l.$.exposed.setShowPop(!1)}))})):M.forEach((e=>{e.$.exposed.setShowPop(!1)}))}return z({props:u,fold:E,offset:I}),a((()=>u.direction),(e=>{"up"!==e&&"down"!==e&&console.error("[wot design] warning(wd-drop-menu): direction must be 'up' or 'down'")}),{deep:!0,immediate:!0}),t((()=>{S.value=$().windowHeight})),(l,o)=>{const a=x,t=s(d("wd-icon"),U);return i(),p(a,{style:h(e.customStyle),class:_(`wd-drop-menu ${e.customClass}`),onClick:K(O,["stop"]),id:y.value},{default:r((()=>[c(a,{class:"wd-drop-menu__list"},{default:r((()=>[(i(!0),m(f,null,v(V(M),((e,l)=>(i(),p(a,{key:l,onClick:l=>function(e){e&&!e.disabled&&(n&&n.closeOther?n.closeOther(e):N(e),E(e))}(e),class:_(`wd-drop-menu__item ${e.disabled?"is-disabled":""} ${C.value===e.$.uid?"is-active":""}`)},{default:r((()=>[c(a,{class:"wd-drop-menu__item-title"},{default:r((()=>[c(a,{class:"wd-drop-menu__item-title-text"},{default:r((()=>[w(b(T(e)),1)])),_:2},1024),c(t,{name:"arrow-down",size:"14px","custom-class":"wd-drop-menu__arrow"})])),_:2},1024)])),_:2},1032,["onClick","class"])))),128))])),_:1}),g(l.$slots,"default",{},void 0,!0)])),_:3},8,["style","class","onClick","id"])}}}),[["__scopeId","data-v-789c1ad3"]]),J=z(e({__name:"Index",setup(e){const{closeOutside:l}=Q(),a=o();o(!1);const t=o(1),u=o(0),n=o(0),m=o(0),f=o(0),v=o(0),_=o(0),b=o(0),y=o(0),g=o([{label:"全部商品",value:0},{label:"新款商品",value:1,tip:"这是补充信息"},{label:"这是比较长的筛选条件这是比较长的筛选条件",value:2}]),h=o([{label:"综合",value:0},{label:"销量",value:1},{label:"上架时间",value:2}]);function k({value:e}){console.log(e)}function C({value:e}){console.log(e)}function $({value:e}){console.log(e)}function K({value:e}){console.log(e)}function I({value:e}){console.log(e)}function S({value:e}){console.log(e)}function U({value:e}){console.log(e)}function j({value:e}){console.log(e)}function z({value:e}){console.log(e)}function B(){a.value.close()}return(e,o)=>{const P=s(d("wd-drop-menu-item"),L),T=s(d("wd-drop-menu"),Y),E=s(d("demo-block"),H),F=s(d("wd-cell"),M),N=s(d("wd-button"),q),Q=x,G=s(d("wd-sort-button"),A),D=s(d("page-wraper"),O);return i(),p(D,null,{default:r((()=>[c(Q,{class:"demo-body",onClick:V(l)},{default:r((()=>[c(E,{title:"基本用法",transparent:""},{default:r((()=>[c(T,null,{default:r((()=>[c(P,{modelValue:t.value,"onUpdate:modelValue":o[0]||(o[0]=e=>t.value=e),options:g.value,onChange:k},null,8,["modelValue","options"]),c(P,{modelValue:u.value,"onUpdate:modelValue":o[1]||(o[1]=e=>u.value=e),options:h.value,onChange:C},null,8,["modelValue","options"])])),_:1})])),_:1}),c(E,{title:"自定义菜单内容",transparent:""},{default:r((()=>[c(T,null,{default:r((()=>[c(P,{modelValue:n.value,"onUpdate:modelValue":o[2]||(o[2]=e=>n.value=e),options:g.value,onChange:$},null,8,["modelValue","options"]),c(P,{ref_key:"dropMenu",ref:a,title:"筛选"},{default:r((()=>[c(Q,null,{default:r((()=>[c(F,{title:"标题文字",value:"内容"}),c(F,{title:"标题文字",label:"描述信息",value:"内容"}),c(Q,{style:{padding:"0 10px 20px","box-sizing":"border-box"}},{default:r((()=>[c(N,{block:"",size:"large",onClick:B},{default:r((()=>[w("主要按钮")])),_:1})])),_:1})])),_:1})])),_:1},512)])),_:1})])),_:1}),c(E,{title:"自定义菜单选项",transparent:""},{default:r((()=>[c(Q,{class:"custom-menu"},{default:r((()=>[c(T,{"custom-style":"flex: 1; min-width: 0"},{default:r((()=>[c(P,{modelValue:m.value,"onUpdate:modelValue":o[3]||(o[3]=e=>m.value=e),options:g.value,onChange:K},null,8,["modelValue","options"])])),_:1}),c(Q,{style:{flex:"1"}},{default:r((()=>[c(G,{modelValue:f.value,"onUpdate:modelValue":o[4]||(o[4]=e=>f.value=e),title:"上架时间",onChange:I},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),c(E,{title:"向上弹出",transparent:""},{default:r((()=>[c(T,{direction:"up"},{default:r((()=>[c(P,{modelValue:v.value,"onUpdate:modelValue":o[5]||(o[5]=e=>v.value=e),options:g.value,onChange:S},null,8,["modelValue","options"]),c(P,{modelValue:_.value,"onUpdate:modelValue":o[6]||(o[6]=e=>_.value=e),options:h.value,onChange:U},null,8,["modelValue","options"])])),_:1})])),_:1}),c(E,{title:"禁用",transparent:""},{default:r((()=>[c(T,{direction:"up"},{default:r((()=>[c(P,{modelValue:b.value,"onUpdate:modelValue":o[7]||(o[7]=e=>b.value=e),disabled:"",options:g.value,onChange:j},null,8,["modelValue","options"]),c(P,{modelValue:y.value,"onUpdate:modelValue":o[8]||(o[8]=e=>y.value=e),options:h.value,onChange:z},null,8,["modelValue","options"])])),_:1})])),_:1})])),_:1},8,["onClick"])])),_:1})}}}),[["__scopeId","data-v-9b9197c5"]]);export{J as default};
