import{d as e,r as a,q as t,a5 as l,N as o,h as s,j as r,o as n,c as i,w as c,z as d,a as u,b as p,t as f,n as b,x as w,p as x,y as _,a6 as m,i as y,a7 as v}from"./index-5b39df8e.js";import{h,b as k,a as g,_ as $}from"./page-wraper.5f136bdc.js";import{_ as C}from"./demo-block.528ea9ea.js";const j=g(e({name:"wd-notice-bar",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{customClass:{default:""},text:null,type:{default:"warning"},scrollable:{type:Boolean,default:!0},delay:{default:1},speed:{default:50},closable:{type:Boolean,default:!1},wrapable:{type:Boolean,default:!1},prefix:null,color:null,backgroundColor:null},emits:["close"],setup(e,{emit:v}){const g=e,$=".wd-notice-bar__wrap",C=".wd-notice-bar__content";a(!0);const j=a(0),z=a(0),B=a(!0);a(0);const I=a(""),T=a(""),{proxy:D}=_();function q(){const{type:e,wrapable:a,scrollable:t}=g;let l=[];e&&l.push(`is-${e}`),!a&&!t&&l.push("wd-notice-bar--ellipse"),a&&!t&&l.push("wd-notice-bar--wrap"),T.value=l.join(" ")}function G(){B.value=!1,v("close")}function H(e,a,t){const l=m({duration:e,delay:a}).translateX(t);return l.step(),l.export()}function N(){I.value=H(0,0,j.value);const e=setTimeout((()=>{I.value=H((j.value+z.value)/g.speed*1e3,0,-z.value),clearTimeout(e)}),20)}return t([()=>g.type,()=>g.scrollable,()=>g.wrapable],(()=>{q()}),{deep:!0,immediate:!0}),t([()=>g.text],(()=>{l((()=>{Promise.all([h($,!1,D),h(C,!1,D)]).then((e=>{const[a,t]=e;if(!(a&&t&&a.width&&t.width))return;const l=a.width,o=t.width;g.scrollable&&o>l&&(I.value=H(o/g.speed*1e3,1e3*g.delay,-o),j.value=l,z.value=o)}))}))}),{deep:!0,immediate:!0}),o((()=>{q()})),(a,t)=>{const l=s(r("wd-icon"),k),o=y;return B.value?(n(),i(o,{key:0,class:b(`wd-notice-bar ${e.customClass} ${T.value}`),style:w(`color: ${e.color}; background: ${e.backgroundColor};`)},{default:c((()=>[e.prefix?(n(),i(l,{key:0,"custom-class":"wd-notice-bar__prefix",size:"18px",name:e.prefix},null,8,["name"])):d(a.$slots,"prefix",{key:1},void 0,!0),u(o,{class:"wd-notice-bar__wrap"},{default:c((()=>[u(o,{class:"wd-notice-bar__content",animation:I.value,onTransitionend:N},{default:c((()=>[p(f(e.text)+" ",1),d(a.$slots,"default",{},void 0,!0)])),_:3},8,["animation"])])),_:3}),e.closable?(n(),i(l,{key:2,"custom-class":"wd-notice-bar__suffix",size:"18px",name:"close-bold",onClick:G})):d(a.$slots,"suffix",{key:3},void 0,!0)])),_:3},8,["class","style"])):x("",!0)}}}),[["__scopeId","data-v-0e2e238c"]]);const z=g({},[["render",function(e,a){const t=s(r("wd-notice-bar"),j),l=s(r("demo-block"),C),o=s(r("wd-icon"),k),d=s(r("page-wraper"),$);return n(),i(d,null,{default:c((()=>[u(l,{title:"基本用法"},{default:c((()=>[u(t,{text:"这是一条消息提示信息这是一条消息提示信息这是一条消息提示信息",prefix:"warn-bold"})])),_:1}),u(l,{title:"类型修改"},{default:c((()=>[u(t,{type:"danger",text:"当前网络不可用，请检查你的网络设置。当前网络不可用，请检查你的网络设置。",prefix:"wifi-error","custom-class":"space"}),u(t,{type:"info",text:"pc-win沃特已登录，可在“设备管理”中查看详情。pc-win沃特已登录，可在“设备管理”中查看详情。",prefix:"check-outline"})])),_:1}),u(l,{title:"禁止滚动"},{default:c((()=>[u(t,{scrollable:!1,text:"通知被禁或时段内消息屏蔽可能造成消…",prefix:"warn-bold"})])),_:1}),u(l,{title:"插槽"},{default:c((()=>[u(t,{scrollable:!1},{prefix:c((()=>[u(o,{"custom-class":"prefix",name:"warn-bold"},{default:c((()=>[p("占位符")])),_:1})])),suffix:c((()=>[v("div",{style:{color:"#4d80f0"}},"查看")])),default:c((()=>[p(" 通知被禁或时段内消息屏蔽可能造成消… ")])),_:1})])),_:1}),u(l,{title:"可关闭的"},{default:c((()=>[u(t,{text:"挂起后，电脑与手机均不会有新客户接入。挂起后，电脑与手机均不会有新客户接入。",closable:"",prefix:"warn-bold"})])),_:1}),u(l,{title:"多行展示"},{default:c((()=>[u(t,{text:"这是一条消息提示信息，这是一条消息提示信息，这是一条消息提示信息这是一条消息提示信息，这是一条消息提示信息，这是一条消息提示信息",wrapable:"",scrollable:!1})])),_:1}),u(l,{title:"自定义颜色"},{default:c((()=>[u(t,{text:"这是一条消息提示信息，这是一条消息提示信息，这是一条消息提示信息",prefix:"check-outline",color:"#34D19D","background-color":"#f0f9eb"})])),_:1})])),_:1})}],["__scopeId","data-v-3d5cc5c1"]]);export{z as default};
