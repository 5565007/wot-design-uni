import{d as e,r as a,v as l,q as s,o as t,c as n,w as o,x as d,z as i,p as u,n as c,i as r,y as m,U as v,a5 as _,m as b,h as f,j as p,a as w,u as y,e as h,F as x,f as k,b as $,t as I,a3 as g}from"./index-5b39df8e.js";import{k as C,j as N,B as T,a as V,p as j,A as B,q as H,h as S,I as q,J as z,b as X}from"./page-wraper.5f136bdc.js";import{_ as A,a as G}from"./wd-sticky-box.1b8aa535.js";import{u as M}from"./useTouch.662a1a46.js";import{u as W}from"./useChildren.5fd1f1a4.js";import{u as E}from"./useTranslate.58e1bf0a.js";const F=Symbol("wd-tabs"),J=V(e({name:"wd-tab",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:{customClass:{default:""},name:null,title:null,disabled:{type:Boolean,default:!1}},setup(e,{expose:v}){const _=e,b=a(!1),f=a(!1),{proxy:p}=m(),{parent:w,index:y}=C(F),h=l((()=>N(w)?w.state.activeIndex:0));function x(e,a){b.value=e,f.value=a}return s((()=>_.name),(e=>{e&&"number"!==T(e)&&"string"!==T(e)?console.error("[wot design] error(wd-tab): the type of name should be number or string"):w&&function(e){const{name:a}=_;if(null==a||""===a)return;w&&w.children.forEach((l=>{l.$.uid!==e.$.uid&&l.name===a&&console.error(`The tab's bound value: ${a} has been used`)}))}(p)}),{deep:!0,immediate:!0}),s((()=>h.value),(e=>{e===y.value?x(!0,!0):x(b.value,!1)}),{deep:!0,immediate:!0}),v({setShow:x,painted:b}),(a,l)=>{const s=r;return t(),n(s,{class:c(`wd-tab ${e.customClass}`)},{default:o((()=>[b.value?(t(),n(s,{key:0,class:"wd-tab__body",style:d(f.value?"":"display: none;")},{default:o((()=>[i(a.$slots,"default",{},void 0,!0)])),_:3},8,["style"])):u("",!0)])),_:3},8,["class"])}}}),[["__scopeId","data-v-20726c18"]]),L=V(e({name:"wd-tabs",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:{customClass:{default:""},modelValue:{default:0},slidableNum:{default:6},mapNum:{default:10},sticky:{type:Boolean,default:!1},offsetTop:{default:0},swipeable:{type:Boolean,default:!1},lineWidth:{default:19},lineHeight:{default:3},color:null,inactiveColor:null,animated:{type:Boolean,default:!1},duration:{default:300}},emits:["change","disabled","click","update:modelValue"],setup(e,{expose:C,emit:V}){const J=e,L=".wd-tabs__nav-item",P=".wd-tabs__nav-container",{translate:U}=E("tabs"),D=v({activeIndex:0}),K=a(""),O=a(!1),Q=a(0),R=a(!1),Y=a(!1),{children:Z,linkChildren:ee}=W(F);ee({state:D});const{proxy:ae}=m(),le=M(),se=l((()=>Z.map(((e,a)=>({disabled:e.disabled,title:e.title,name:N(e.name)?e.name:a}))))),te=l((()=>J.animated?j({left:-100*D.activeIndex+"%","transition-duration":J.duration+"ms","-webkit-transition-duration":J.duration+"ms"}):"")),ne=B((function(e=0,a=!1,l=!0){0!==se.value.length&&(e=ve(e),se.value[e].disabled||(D.activeIndex=e,l&&(de(!1===a),ie()),function(){if(!Y.value)return;se.value[D.activeIndex].name!==J.modelValue&&(V("change",{index:D.activeIndex,name:se.value[D.activeIndex].name}),V("update:modelValue",se.value[D.activeIndex].name))}()))}),100,{leading:!1});function oe(){O.value?(R.value=!1,setTimeout((()=>{O.value=!1}),300)):(O.value=!0,setTimeout((()=>{R.value=!0}),100))}function de(e=!0){if(!Y.value)return;const{lineWidth:a,lineHeight:l}=J;S(L,!0,ae).then((s=>{const t=s[D.activeIndex],n=a;let o=s.slice(0,D.activeIndex).reduce(((e,a)=>e+a.width),0);o+=(t.width-n)/2;const d=`\n            height: ${l}px;\n            width: ${n}px;\n            transform: translateX(${o}px);\n            ${e?"transition: width 300ms ease, transform 300ms ease;":""}\n          `;K.value!==d&&(K.value=d)}))}function ie(){Y.value&&Promise.all([S(L,!0,ae),S(P,!1,ae)]).then((([e,a])=>{const l=e[D.activeIndex],s=e.slice(0,D.activeIndex).reduce(((e,a)=>e+a.width),0)-(a.width-l.width)/2;s===Q.value?Q.value=s+Math.random()/1e4:Q.value=s}))}function ue(e){if(void 0===e)return;const{name:a,disabled:l}=se.value[e];l?V("disabled",{index:e,name:a}):(O.value&&oe(),ne(e),V("click",{index:e,name:a}))}function ce(e){J.swipeable&&le.touchStart(e)}function re(e){J.swipeable&&le.touchMove(e)}function me(){if(!J.swipeable)return;const{direction:e,deltaX:a,offsetX:l}=le;"horizontal"===e.value&&l.value>=50&&(a.value>0&&0!==D.activeIndex?ne(D.activeIndex-1):a.value<0&&D.activeIndex!==se.value.length-1&&(ne(D.activeIndex+1),ne(D.activeIndex+1)))}function ve(e){if(q(e)&&e>=se.value.length&&(console.error("[wot design] warning(wd-tabs): the type of tabs' value is Number shouldn't be less than its children"),e=0),z(e)){const a=se.value.findIndex((a=>a.name===e));e=-1===a?0:a}return e}return s((()=>J.modelValue),(e=>{"number"!==T(e)&&"string"!==T(e)&&console.error("[wot design] error(wd-tabs): the type of value should be number or string"),""!==e&&void 0!==e||console.error("[wot design] error(wd-tabs): tabs's value cannot be null or undefined"),"number"==typeof e&&e<0&&console.error("[wot design] error(wd-tabs): tabs's value cannot be less than zero")}),{immediate:!0,deep:!0}),s((()=>J.modelValue),(e=>{const a=ve(e);ne(e,!1,a!==D.activeIndex)}),{immediate:!1,deep:!0}),s((()=>Z.length),(()=>{Y.value&&_((()=>{ne(J.modelValue)}))})),s((()=>J.slidableNum),(e=>{H(e,"slidableNum")})),s((()=>J.mapNum),(e=>{H(e,"mapNum")})),b((()=>{Y.value=!0,_((()=>{ne(J.modelValue,!0)}))})),C({setActive:ne,scrollIntoView:ie,updateLineStyle:de,children:Z}),(a,l)=>{const s=r,m=g,v=f(p("wd-icon"),X),_=f(p("wd-sticky"),A),b=f(p("wd-sticky-box"),G);return e.sticky?(t(),n(b,{key:0},{default:o((()=>[w(s,{class:c(`wd-tabs ${e.customClass} ${e.slidableNum<y(se).length?"is-slide":""} ${e.mapNum<y(se).length&&0!==e.mapNum?"is-map":""}`)},{default:o((()=>[w(_,{"offset-top":e.offsetTop},{default:o((()=>[w(s,{class:"wd-tabs__nav wd-tabs__nav--sticky"},{default:o((()=>[w(s,{class:"wd-tabs__nav--wrap"},{default:o((()=>[w(m,{"scroll-x":e.slidableNum<y(se).length,"scroll-with-animation":"","scroll-left":Q.value},{default:o((()=>[w(s,{class:"wd-tabs__nav-container"},{default:o((()=>[(t(!0),h(x,null,k(y(se),((a,l)=>(t(),n(s,{onClick:e=>ue(l),key:l,class:c(`wd-tabs__nav-item  ${D.activeIndex===l?"is-active":""} ${a.disabled?"is-disabled":""}`),style:d(D.activeIndex===l?e.color?"color:"+e.color:"":e.inactiveColor?"color:"+e.inactiveColor:"")},{default:o((()=>[$(I(a.title),1)])),_:2},1032,["onClick","class","style"])))),128)),w(s,{class:"wd-tabs__line",style:d(K.value)},null,8,["style"])])),_:1})])),_:1},8,["scroll-x","scroll-left"])])),_:1}),e.mapNum<y(se).length&&0!==e.mapNum?(t(),n(s,{key:0,class:"wd-tabs__map"},{default:o((()=>[w(s,{class:c("wd-tabs__map-btn  "+(R.value?"is-open":"")),onClick:oe},{default:o((()=>[w(s,{class:c("wd-tabs__map-arrow  "+(R.value?"is-open":""))},{default:o((()=>[w(v,{name:"arrow-down"})])),_:1},8,["class"])])),_:1},8,["class"]),w(s,{class:"wd-tabs__map-header",style:d(`${O.value?"":"display:none;"}  ${R.value?"opacity:1;":""}`)},{default:o((()=>[$(I(y(U)("all")),1)])),_:1},8,["style"]),w(s,{class:c("wd-tabs__map-body  "+(R.value?"is-open":"")),style:d(O.value?"":"display:none")},{default:o((()=>[(t(!0),h(x,null,k(y(se),((a,l)=>(t(),n(s,{class:"wd-tabs__map-nav-item",key:l,onClick:e=>ue(l)},{default:o((()=>[w(s,{class:c(`wd-tabs__map-nav-btn ${D.activeIndex===l?"is-active":""}  ${a.disabled?"is-disabled":""}`),style:d(D.activeIndex===l?e.color?"color:"+e.color+";border-color:"+e.color:"":e.inactiveColor?"color:"+e.inactiveColor:"")},{default:o((()=>[$(I(a.title),1)])),_:2},1032,["class","style"])])),_:2},1032,["onClick"])))),128))])),_:1},8,["class","style"])])),_:1})):u("",!0)])),_:1})])),_:1},8,["offset-top"]),w(s,{class:"wd-tabs__container",onTouchstart:ce,onTouchmove:re,onTouchend:me,onTouchcancel:me},{default:o((()=>[w(s,{class:c(["wd-tabs__body",e.animated?"is-animated":""]),style:d(y(te))},{default:o((()=>[i(a.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"])])),_:3}),w(s,{class:"wd-tabs__mask",style:d(`${O.value?"":"display:none;"} ${R.value?"opacity:1;":""}`),onClick:oe},null,8,["style"])])),_:3},8,["class"])])),_:3})):(t(),n(s,{key:1,class:c(`wd-tabs  ${e.customClass} ${e.slidableNum<y(se).length?"is-slide":""} ${e.mapNum<y(se).length&&0!==e.mapNum?"is-map":""}`)},{default:o((()=>[w(s,{class:"wd-tabs__nav"},{default:o((()=>[w(s,{class:"wd-tabs__nav--wrap"},{default:o((()=>[w(m,{"scroll-x":e.slidableNum<y(se).length,"scroll-with-animation":"","scroll-left":Q.value},{default:o((()=>[w(s,{class:"wd-tabs__nav-container"},{default:o((()=>[(t(!0),h(x,null,k(y(se),((a,l)=>(t(),n(s,{onClick:e=>ue(l),key:l,class:c(`wd-tabs__nav-item ${D.activeIndex===l?"is-active":""} ${a.disabled?"is-disabled":""}`),style:d(D.activeIndex===l?e.color?"color:"+e.color:"":e.inactiveColor?"color:"+e.inactiveColor:"")},{default:o((()=>[$(I(a.title),1)])),_:2},1032,["onClick","class","style"])))),128)),w(s,{class:"wd-tabs__line",style:d(K.value)},null,8,["style"])])),_:1})])),_:1},8,["scroll-x","scroll-left"])])),_:1}),e.mapNum<y(se).length&&0!==e.mapNum?(t(),n(s,{key:0,class:"wd-tabs__map"},{default:o((()=>[w(s,{class:"wd-tabs__map-btn",onClick:oe},{default:o((()=>[w(s,{class:c("wd-tabs__map-arrow "+(R.value?"is-open":""))},{default:o((()=>[w(v,{name:"arrow-down"})])),_:1},8,["class"])])),_:1}),w(s,{class:"wd-tabs__map-header",style:d(`${O.value?"":"display:none;"}  ${R.value?"opacity:1;":""}`)},{default:o((()=>[$(I(y(U)("all")),1)])),_:1},8,["style"]),w(s,{class:c("wd-tabs__map-body "+(R.value?"is-open":"")),style:d(O.value?"":"display:none")},{default:o((()=>[(t(!0),h(x,null,k(y(se),((e,a)=>(t(),n(s,{class:"wd-tabs__map-nav-item",key:a,onClick:e=>ue(a)},{default:o((()=>[w(s,{class:c(`wd-tabs__map-nav-btn ${D.activeIndex===a?"is-active":""}  ${e.disabled?"is-disabled":""}`)},{default:o((()=>[$(I(e.title),1)])),_:2},1032,["class"])])),_:2},1032,["onClick"])))),128))])),_:1},8,["class","style"])])),_:1})):u("",!0)])),_:1}),w(s,{class:"wd-tabs__container",onTouchstart:ce,onTouchmove:re,onTouchend:me,onTouchcancel:me},{default:o((()=>[w(s,{class:c(["wd-tabs__body",e.animated?"is-animated":""]),style:d(y(te))},{default:o((()=>[i(a.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"])])),_:3}),w(s,{class:"wd-tabs__mask",style:d(`${O.value?"":"display:none;"}  ${R.value?"opacity:1":""}`),onClick:oe},null,8,["style"])])),_:3},8,["class"]))}}}),[["__scopeId","data-v-e4ee3854"]]);export{J as _,L as a};
